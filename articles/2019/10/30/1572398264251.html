<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>CentOS7本地化搭建Easy-Mock | 一人行者</title><script src="https://cdn.bootcss.com/valine/1.4.4/Valine.min.js"></script><link rel="stylesheet" href="/css/arknights.css"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/highlight.js/10.1.2/styles/atom-one-dark-reasonable.min.css"><style>@font-face {
 font-family: BenderLight;
 src: local('Bender'), url("/font/BenderLight.ttf");
}
@font-face {
 font-family: 'JetBrains Mono';
 src: local('JetBrains Mono'), url('/font/JetBrainsMono-Regular.woff2') format('woff2');
}</style><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="一人行者" type="application/atom+xml">
</head><body><header><nav><a href="/">Home</a><a href="/archives/">Archives</a></nav></header><main><article><div id="post-bg"><div id="post-title"><h1>CentOS7本地化搭建Easy-Mock</h1><hr></div><div id="post-content"><h1 id="CentOS7本地化搭建Easy-Mock"><a href="#CentOS7本地化搭建Easy-Mock" class="headerlink" title="CentOS7本地化搭建Easy-Mock"></a>CentOS7本地化搭建Easy-Mock</h1><blockquote>
<p>Easy-Mock是一款个人使用较为舒服的mock框架，在开发时可以较为方便地自定义mock数据结构，并且可以无缝对接Swagger。官网目前提供了对应的docker镜像，目前已按照此方法部署在该ECS实例上。</p>
</blockquote>
<p>下面是具体步骤可做参考：</p>
<h2 id="yum升级"><a href="#yum升级" class="headerlink" title="yum升级"></a>yum升级</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">yum update<br></code></pre></td></tr></table></figure>
<h2 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">sudo yum install -y yum-utils device-mapper-persistent-data lvm2<br></code></pre></td></tr></table></figure>
<h2 id="安装最新社区版docker"><a href="#安装最新社区版docker" class="headerlink" title="安装最新社区版docker"></a>安装最新社区版docker</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">sudo yum install docker-ce docker-ce-cli containerd.io<br></code></pre></td></tr></table></figure>
<h2 id="启动Docker"><a href="#启动Docker" class="headerlink" title="启动Docker"></a>启动Docker</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">sudo systemctl start docker<br></code></pre></td></tr></table></figure>
<h3 id="其他可能用到的命令"><a href="#其他可能用到的命令" class="headerlink" title="其他可能用到的命令"></a>其他可能用到的命令</h3><h5 id="停止"><a href="#停止" class="headerlink" title="停止"></a>停止</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">sudo systemctl stop docker<br></code></pre></td></tr></table></figure>
<h5 id="重启"><a href="#重启" class="headerlink" title="重启"></a>重启</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">sudo systemctl restart docker<br></code></pre></td></tr></table></figure>
<h2 id="安装docker-compose"><a href="#安装docker-compose" class="headerlink" title="安装docker-compose"></a>安装docker-compose</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">sudo curl -L &quot;https:&#x2F;&#x2F;github.com&#x2F;docker&#x2F;compose&#x2F;releases&#x2F;download&#x2F;1.24.0&#x2F;docker-compose-$(uname -s)-$(uname -m)&quot; -o &#x2F;usr&#x2F;local&#x2F;bin&#x2F;docker-compose<br></code></pre></td></tr></table></figure>
<h2 id="添加可执行权限"><a href="#添加可执行权限" class="headerlink" title="添加可执行权限"></a>添加可执行权限</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">sudo chmod +x &#x2F;usr&#x2F;local&#x2F;bin&#x2F;docker-compose<br></code></pre></td></tr></table></figure>
<h2 id="添加easy-mock配置文件"><a href="#添加easy-mock配置文件" class="headerlink" title="添加easy-mock配置文件"></a>添加easy-mock配置文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs plain"># docker-compose.yml<br>version: &#39;3&#39;<br><br>services:<br>  mongodb:<br>    image: mongo:3.4<br>    volumes:<br>      # .&#x2F;data&#x2F;db 数据库文件存放地址，根据需要修改为本地地址<br>      - &#39;.&#x2F;data&#x2F;db&#39;<br>    networks:<br>      - easy-mock<br>    restart: always<br><br>  redis:<br>    image: redis:4.0.6<br>    command: redis-server --appendonly yes<br>    volumes:<br>      # .&#x2F;data&#x2F;redis redis 数据文件存放地址，根据需要修改为本地地址<br>      - &#39;.&#x2F;data&#x2F;redis&#39;<br>    networks:<br>      - easy-mock<br>    restart: always<br><br>  web:<br>    image: easymock&#x2F;easymock:1.6.0<br>    command: &#x2F;bin&#x2F;bash -c &quot;npm start&quot;<br>    ports:<br>      - 7300:7300<br>    volumes:<br>      # 日志地址，根据需要修改为本地地址<br>      - &#39;.&#x2F;logs&#39;<br>      # 配置地址，请使用本地配置地址替换<br>      # - &#39;.&#x2F;production.json&#39;<br>    networks:<br>      - easy-mock<br>    restart: always<br><br>networks:<br>  easy-mock:<br></code></pre></td></tr></table></figure>
<h2 id="新建production-json"><a href="#新建production-json" class="headerlink" title="新建production.json"></a>新建production.json</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs plain">&#123;<br>  &quot;port&quot;: 7300,<br>  &quot;host&quot;: &quot;0.0.0.0&quot;,<br>  &quot;pageSize&quot;: 30,<br>  &quot;proxy&quot;: false,<br>  &quot;db&quot;: &quot;mongodb:&#x2F;&#x2F;localhost&#x2F;easy-mock&quot;,<br>  &quot;unsplashClientId&quot;: &quot;&quot;,<br>  &quot;redis&quot;: &#123;<br>    &quot;keyPrefix&quot;: &quot;[Easy Mock]&quot;,<br>    &quot;port&quot;: 6379,<br>    &quot;host&quot;: &quot;redis&quot;,<br>    &quot;password&quot;: &quot;&quot;,<br>    &quot;db&quot;: 0<br>  &#125;,<br>  &quot;blackList&quot;: &#123;<br>    &quot;projects&quot;: [], &#x2F;&#x2F; projectId, e.g.&quot;5a4495e16ef711102113e500&quot;<br>    &quot;ips&quot;: [] &#x2F;&#x2F; ip, e.g. &quot;127.0.0.1&quot;<br>  &#125;,<br>  &quot;rateLimit&quot;: &#123; &#x2F;&#x2F; https:&#x2F;&#x2F;github.com&#x2F;koajs&#x2F;ratelimit<br>    &quot;max&quot;: 1000,<br>    &quot;duration&quot;: 1000<br>  &#125;,<br>  &quot;jwt&quot;: &#123;<br>    &quot;expire&quot;: &quot;14 days&quot;,<br>    &quot;secret&quot;: &quot;shared-secret&quot;<br>  &#125;,<br>  &quot;upload&quot;: &#123;<br>    &quot;types&quot;: [&quot;.jpg&quot;, &quot;.jpeg&quot;, &quot;.png&quot;, &quot;.gif&quot;, &quot;.json&quot;, &quot;.yml&quot;, &quot;.yaml&quot;],<br>    &quot;size&quot;: 5242880,<br>    &quot;dir&quot;: &quot;..&#x2F;public&#x2F;upload&quot;,<br>    &quot;expire&quot;: &#123;<br>      &quot;types&quot;: [&quot;.json&quot;, &quot;.yml&quot;, &quot;.yaml&quot;],<br>      &quot;day&quot;: -1<br>    &#125;<br>  &#125;,<br>  &quot;ldap&quot;: &#123;<br>    &quot;server&quot;: &quot;&quot;, &#x2F;&#x2F; Set server to enable LDAP login. e.g. &quot;ldap:&#x2F;&#x2F;localhost:389&quot; or &quot;ldaps:&#x2F;&#x2F;localhost:389&quot;（use SSL）<br>    &quot;bindDN&quot;: &quot;&quot;, &#x2F;&#x2F; Username，e.g. &quot;cn&#x3D;admin,dc&#x3D;example,dc&#x3D;com&quot;<br>    &quot;password&quot;: &quot;&quot;,<br>    &quot;filter&quot;: &#123;<br>      &quot;base&quot;: &quot;&quot;, &#x2F;&#x2F; Base where we can search for users，e.g. &quot;dc&#x3D;example,dc&#x3D;com&quot;<br>      &quot;attributeName&quot;: &quot;&quot; &#x2F;&#x2F; e.g. &quot;mail&quot; or &quot;email&quot; etc.<br>    &#125;<br>  &#125;,<br>  &quot;fe&quot;: &#123;<br>    &quot;copyright&quot;: &quot;&quot;,<br>    &quot;storageNamespace&quot;: &quot;easy-mock_&quot;,<br>    &quot;timeout&quot;: 25000,<br>    &quot;publicPath&quot;: &quot;&#x2F;dist&#x2F;&quot;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="启动Docker-Compose"><a href="#启动Docker-Compose" class="headerlink" title="启动Docker-Compose"></a>启动Docker-Compose</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plain">docker-compose up -d<br></code></pre></td></tr></table></figure>
<h2 id="其他命令"><a href="#其他命令" class="headerlink" title="其他命令"></a>其他命令</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plain"># 停止<br>docker-compose stop<br># 查看运行状态<br>docker-compose ps<br># 查看运行日志<br>docker-compose logs<br></code></pre></td></tr></table></figure>
<div id="paginator"></div></div><div id="post-footer"><hr><a href="/articles/2019/11/08/1573204695172.html">← Prev CentOS7搭建CDH5.16.2</a><span style="color: #fe2"> | </span><a href="/articles/2019/10/24/1571886721471.html">b站视频推荐：彩铅手绘十元老婆 Next →</a><hr></div><div id="bottom-btn"><a id="to-index" href="#post-index" title="index">≡</a><a id="to-top" href="#post-title" title="to top">∧</a></div><div id="Valine"></div><script>new Valine({
 el: '#Valine'
 , appId: ''
 , appKey: ''
 , placeholder: '此条评论委托企鹅物流发送'
})</script></div></article><aside><div id="about"><a href="/" id="logo"><img src="https://ak.hypergryph.com/assets/index/images/ak/pc/faction/1.png" alt="Logo"></a><h1 id="Dr"><a href="/"> Dr.CrissMagic</a></h1><section id="total"><a id="total-archives" href="/archives"><span class="total-title">Archives Total:</span><span class="total-number">25</span></a><div id="total-tags"><span class="total-title">Tags:</span><span class="total-number">28</span></div><div id="total-categories"><span class="total-title">Categories:</span><span class="total-number">0</span></div></section></div><div id="aside-block"></div><footer><nobr><span class="text-title">©</span><span class="text-content">1970 to 2020</span></nobr><wbr><nobr><span class="text-title">ICP</span><span class="text-content">——备案号——</span></nobr><wbr><wbr><nobr>published with&nbsp;<a target="_blank" rel="noopener" href="http://hexo.io">Hexo&nbsp;</a></nobr><wbr><nobr>Theme&nbsp;<a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknight&nbsp;</a></nobr><wbr><nobr>by&nbsp;<a target="_blank" rel="noopener" href="https://github.com/Yue-plus">Yue_plus</a></nobr></footer></aside></main><canvas id="canvas-dust"></canvas><script src="/js/arknights.js"></script><script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/10.1.2/highlight.min.js"></script></body></html>