<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"39.101.199.168","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="CrissMagicBlog">
<meta property="og:type" content="website">
<meta property="og:title" content="一人行者">
<meta property="og:url" content="http://39.101.199.168/index.html">
<meta property="og:site_name" content="一人行者">
<meta property="og:description" content="CrissMagicBlog">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="CrissMagic">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://39.101.199.168/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>一人行者</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">一人行者</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">每一段旅行都有终点</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://39.101.199.168/2021/04/14/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CrissMagic">
      <meta itemprop="description" content="CrissMagicBlog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一人行者">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/04/14/hello-world/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-04-14 13:39:58 / 修改时间：15:49:43" itemprop="dateCreated datePublished" datetime="2021-04-14T13:39:58+08:00">2021-04-14</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="欢迎来到CrissMagic的个人博客"><a href="#欢迎来到CrissMagic的个人博客" class="headerlink" title="欢迎来到CrissMagic的个人博客"></a>欢迎来到CrissMagic的个人博客</h1><p>这里是CrissMagic，目前从事Java后台和大数据开发工作，喜爱IT技术，爱好ACGN文化、魔术、VOCALOID、Adobe全家桶等。网站名取材于ilem的歌曲《一人行者》，头像是世界第一的公主殿下，名字取材于美国著名魔术师CrissAngel，他也是我在魔术方面的偶像之一。</p>
<p>此网站使用Solo开源博客搭建，后期会在此基础上扩展为个人网站，主要用于分享我个人的技术博客、一些事物的评测以及生活方面的感想，欢迎各位评论吐槽。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://39.101.199.168/articles/2020/10/15/1602757520896.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CrissMagic">
      <meta itemprop="description" content="CrissMagicBlog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一人行者">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/articles/2020/10/15/1602757520896.html" class="post-title-link" itemprop="url">windows和Linux后台Jar包启动方式记录</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-10-15 18:25:20" itemprop="dateCreated datePublished" datetime="2020-10-15T18:25:20+08:00">2020-10-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-10-26 11:42:11" itemprop="dateModified" datetime="2020-10-26T11:42:11+08:00">2020-10-26</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><img src="https://b3logfile.com/bing/20191217.jpg?imageView2/1/w/960/h/540/interlace/1/q/100"></p>
<h1 id="windows和Linux后台Jar包启动方式记录"><a href="#windows和Linux后台Jar包启动方式记录" class="headerlink" title="windows和Linux后台Jar包启动方式记录"></a>windows和Linux后台Jar包启动方式记录</h1><h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p>又是很久没更新了😂 ，9月因为更换工作花费了一些时间，十月初本网站的各种证书还有DNS解析也到期，陆陆续续花了不少时间解决，同时也把该博客使用的Solo进行了升级，接下来可以恢复更新了。</p>
<p>在之前，如果要部署的服务器安装有tomcat则可以直接上传war包进行配置，但在如今SpringBoot流行的情况下下，<code>package</code>后的jar包运行也是比价常用的，所以本文记录一下在linux环境与windows环境下的jar包启动方式，主要是脚本的写法，供以后参考。当然，此处是单一jar包的情况，如果是微服务若干个jar包推荐使用docker运行。</p>
<h2 id="Linux环境"><a href="#Linux环境" class="headerlink" title="Linux环境"></a>Linux环境</h2><p>linux环境下相对而言较为简单，但是如果使用 <code>java -jar</code>启动，一方面只能前台，ctrl+c就会结束，另一方面日志的查看也不方便，所以可以编写启动与结束脚本。</p>
<p><a target="_blank" rel="noopener" href="https://el-admin.vip/guide/xmbs.html#%E5%90%8E%E7%AB%AF%E9%83%A8%E7%BD%B2">此处参考el-admin的部署方式写法</a></p>
<h3 id="启动脚本-start-sh"><a href="#启动脚本-start-sh" class="headerlink" title="启动脚本-start.sh"></a>启动脚本-start.sh</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup java -jar jarName.jar &gt; nohup.out 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure>

<p><code>&amp;</code>设置为后台启动，使用 <code>nohup</code>则可将日志输出到nohup.out文件中</p>
<h3 id="结束脚本-stop-sh"><a href="#结束脚本-stop-sh" class="headerlink" title="结束脚本-stop.sh"></a>结束脚本-stop.sh</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">PID&#x3D;$(ps -ef | grep jarName.jar | grep -v grep | awk &#39;&#123; print $2 &#125;&#39;)</span><br><span class="line">if [ -z &quot;$PID&quot; ]</span><br><span class="line">then</span><br><span class="line">echo Application is already stopped</span><br><span class="line">else</span><br><span class="line">echo kill -9 $PID</span><br><span class="line">kill -9 $PID</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p>通过 <code>ps -ef</code>命令查找当前jar包运行的PID，再使用 <code>kill</code>命令停止</p>
<h3 id="查看日志-log-sh"><a href="#查看日志-log-sh" class="headerlink" title="查看日志-log.sh"></a>查看日志-log.sh</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail -f nohup.out</span><br></pre></td></tr></table></figure>

<p>很简单，查看输出的nohup.out文件即可</p>
<h2 id="windows环境"><a href="#windows环境" class="headerlink" title="windows环境"></a>windows环境</h2><p>windows环境下需要启动cmd窗口，所以涉及到的命令会有所区别</p>
<h3 id="启动脚本-start-bat"><a href="#启动脚本-start-bat" class="headerlink" title="启动脚本-start.bat"></a>启动脚本-start.bat</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line">%1 mshta vbscript:CreateObject(&quot;WScript.Shell&quot;).Run(&quot;%~s0 ::&quot;,0,FALSE)(window.close)&amp;&amp;exit</span><br><span class="line">java -jar jarName.jar  &gt;StartupLog%date:~0,4%%date:~5,2%%date:~8,2%.log  2&gt;&amp;1 &amp;</span><br><span class="line">exit</span><br></pre></td></tr></table></figure>

<p>和linux类似只不过多添加了关闭cmd窗口命令，日志输出到StartupLog+今日日期.log文件中</p>
<h3 id="结束脚本-stop-bat"><a href="#结束脚本-stop-bat" class="headerlink" title="结束脚本-stop.bat"></a>结束脚本-stop.bat</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line">set port&#x3D;10000</span><br><span class="line">for &#x2F;f &quot;tokens&#x3D;1-5&quot; %%i in (&#39;netstat -ano^|findstr &quot;:%port%&quot;&#39;) do (</span><br><span class="line">    echo kill the process %%m who use the port %port%</span><br><span class="line">    taskkill &#x2F;pid %%m</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>和linux类似，也是查找端口对应的pid进行结束，此处可以写多个端口号。<br>同时如果出现pid占用等情况，可以使用 <code>taskkill /F</code>来强制结束该进程。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://39.101.199.168/articles/2020/07/30/1596097184978.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CrissMagic">
      <meta itemprop="description" content="CrissMagicBlog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一人行者">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/articles/2020/07/30/1596097184978.html" class="post-title-link" itemprop="url">Vue标签拖拽实现与部分踩坑记录</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-07-30 16:19:45 / 修改时间：16:59:26" itemprop="dateCreated datePublished" datetime="2020-07-30T16:19:45+08:00">2020-07-30</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><img src="https://img.hacpai.com/bing/20191222.jpg?imageView2/1/w/960/h/540/interlace/1/q/100"></p>
<h1 id="Vue-标签拖拽实现与部分踩坑记录"><a href="#Vue-标签拖拽实现与部分踩坑记录" class="headerlink" title="Vue 标签拖拽实现与部分踩坑记录"></a>Vue 标签拖拽实现与部分踩坑记录</h1><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>自己作为后端工程师开发前端项目多有不易，幸好目前前端提供的框架还算多，抛开一些类似“圣诞事件”的不提，在使用 vue+elementui 做了几个项目后还是感觉不错，不过 vue 的重渲染有点麻烦，关于 elementui 的讨论也有很多，自己最近也试着接触了例如 vuetify、quasar、taro，感觉还是更偏向于移动端的 ui 开发，不过在下次项目选型的时候会更加注意，特别是政府项目。<br>七月底了，抽时间记录一下在最近在开发过程中一些坑还有实现标签拖拽的代码，供以后参考。</p>
<h2 id="标签拖拽实现"><a href="#标签拖拽实现" class="headerlink" title="标签拖拽实现"></a>标签拖拽实现</h2><blockquote>
<p>目的是用户可以自行从页面左侧选择需要的标签拖拽到右侧的方框里，使用 vue 绑定配置 echarts 的 option。</p>
</blockquote>
<p>效果如下图所示：<br><img src="https://b3logfile.com/file/2020/07/%E6%A0%87%E7%AD%BE%E6%8B%96%E6%8B%BD%E4%BA%8B%E4%BE%8B-43e5ed8b.gif" alt="标签拖拽事例.gif"></p>
<p>本身想使用 vuedragable 插件的，但是发现或许不适合在多个容器间进行拖拽，所以此处采用 <a target="_blank" rel="noopener" href="https://github.com/bevacqua/dragula">dargula</a>，但由于该技术并未提供拖拽后的回调函数，所以采用手动添加监听事件的方式。</p>
<p>具体功能逻辑如下：</p>
<ol>
<li>新增系列时向 v-for 绑定的数组中添加对象，对象中设置该系列对应的容器 id；</li>
<li>在下个周期渲染完成后根据 class 类名获取 dom 元素并添加至 dragula 容器；</li>
<li>同样手动给这些 dom 添加 <code>DOMNodeInserted</code> 事件和 <code>DOMNodeRemoved</code> 事件，并用参数传递标签 id 和容器 id；</li>
<li>在监听事件触发后执行对应的逻辑方法。</li>
</ol>
<p>具体代码如下（已省略不重要的代码）：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">	...</span><br><span class="line">	<span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">	<span class="comment">// 初始化dragula</span></span><br><span class="line">	<span class="built_in">this</span>.drag = <span class="built_in">this</span>.$dragula(</span><br><span class="line">	&#123;</span><br><span class="line">  		isContainer: <span class="function"><span class="keyword">function</span> (<span class="params">el</span>) </span>&#123;</span><br><span class="line">		<span class="comment">// 设置带有tagData的class样式的dom加入容器</span></span><br><span class="line">	        <span class="keyword">return</span> el.classList.contains(<span class="string">&#x27;tag-data&#x27;</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        	moves: <span class="function"><span class="keyword">function</span> (<span class="params">el, source, handle, sibling</span>) </span>&#123;</span><br><span class="line">	        <span class="comment">// 哪些元素能拖动，true为都能拖动</span></span><br><span class="line">	        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;,</span><br><span class="line">        	accepts: <span class="function"><span class="keyword">function</span> (<span class="params">el, target, source, sibling</span>) </span>&#123;</span><br><span class="line">          	<span class="comment">// 放入容器的条件，true为都能放入</span></span><br><span class="line">          	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;,</span><br><span class="line">        	invalid: <span class="function"><span class="keyword">function</span> (<span class="params">el, handle</span>) </span>&#123;</span><br><span class="line">          	<span class="comment">// 默认情况下不会阻止任何拖动</span></span><br><span class="line">          	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 拖动的元素是否为副本</span></span><br><span class="line">        copy: <span class="literal">false</span>,</span><br><span class="line">        <span class="comment">// 复制的源容器重新排序</span></span><br><span class="line">        copySortSource: <span class="literal">false</span>,</span><br><span class="line">        <span class="comment">// 是否将拖到容器外的元素放回原处</span></span><br><span class="line">        revertOnSpill: <span class="literal">true</span>,</span><br><span class="line">        <span class="comment">// 是否将拖到容器外的元素删除</span></span><br><span class="line">        removeOnSpill: <span class="literal">false</span>,</span><br><span class="line">        <span class="comment">// 设置获取附加镜像元素的元素</span></span><br><span class="line">        mirrorContainer: <span class="built_in">document</span>.body</span><br><span class="line">      &#125;)</span><br><span class="line">	&#125;,</span><br><span class="line">	methods:&#123;</span><br><span class="line">	...mapActions(</span><br><span class="line">        <span class="comment">// 映射actions中的方法</span></span><br><span class="line">        &#123;</span><br><span class="line">          addContainerTagArray: <span class="string">&#x27;addContainerTagArray&#x27;</span>,</span><br><span class="line">          removeContainerTagArray: <span class="string">&#x27;removeContainerTagArray&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      ),</span><br><span class="line">	<span class="function"><span class="title">addAndBind</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">// 先清空之前的数据</span></span><br><span class="line">        <span class="built_in">this</span>.seriesArray = []</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="built_in">this</span>.currentSeriesNum; i++) &#123;</span><br><span class="line">        <span class="comment">// 随机生成UUID</span></span><br><span class="line">          <span class="keyword">let</span> tempUUID = genUUID()</span><br><span class="line">          <span class="built_in">this</span>.seriesArray.push(</span><br><span class="line">            &#123;</span><br><span class="line">              containerId: tempUUID,</span><br><span class="line">              type: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">              lineStyle: &#123;</span><br><span class="line">                color: <span class="string">&#x27;#409EFF&#x27;</span></span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          )</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">let</span> _this = <span class="built_in">this</span></span><br><span class="line">        <span class="comment">// 此处必须使用$nextTick否则vue还未渲染完时无法通过getElementsByClassName方法获取到dom对象</span></span><br><span class="line">        <span class="built_in">this</span>.$nextTick(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">let</span> eles = <span class="built_in">document</span>.getElementsByClassName(<span class="string">&#x27;series-tag-container&#x27;</span>);</span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; _this.seriesArray.length; i++) &#123;</span><br><span class="line">            <span class="comment">// 数据添加完统一添加事件监听</span></span><br><span class="line">            <span class="keyword">let</span> series = _this.seriesArray[i]</span><br><span class="line">            <span class="comment">// dom渲染完成后执行</span></span><br><span class="line">            <span class="keyword">let</span> element = eles[i]</span><br><span class="line">            <span class="comment">// 添加拖拽容器</span></span><br><span class="line">            _this.drag.containers.push(element)</span><br><span class="line">            <span class="comment">// 设置自定义属性</span></span><br><span class="line">            element.setAttribute(<span class="string">&quot;containerId&quot;</span>, series.containerId)</span><br><span class="line">            <span class="comment">//  给新的系列标签容器添加监听器</span></span><br><span class="line">            element.addEventListener(<span class="string">&quot;DOMNodeInserted&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">              <span class="keyword">if</span> (element.children.length &gt; <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="comment">// 已经存在一个标签则退回</span></span><br><span class="line">                _this.drag.cancel()</span><br><span class="line">                _this.$message(&#123;</span><br><span class="line">                  message: <span class="string">&#x27;最多选择一个标签&#x27;</span>,</span><br><span class="line">                  type: <span class="string">&#x27;warning&#x27;</span></span><br><span class="line">                &#125;);</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">              &#125;</span><br><span class="line">              _this.addSeriesArray(e.target.getAttribute(<span class="string">&quot;id&quot;</span>),e.currentTarget.getAttribute(<span class="string">&quot;containerId&quot;</span>))</span><br><span class="line">            &#125;)</span><br><span class="line">            element.addEventListener(<span class="string">&quot;DOMNodeRemoved&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">              _this.removeSeriesArray(e.currentTarget.getAttribute(<span class="string">&quot;containerId&quot;</span>))</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function"><span class="title">addSeriesArray</span>(<span class="params">tagId, containerId</span>)</span> &#123;</span><br><span class="line">        <span class="comment">// 从tagArray中根据id添加数据</span></span><br><span class="line">        <span class="keyword">let</span> tempTag = <span class="built_in">this</span>.tagArray.filter(<span class="function"><span class="params">tag</span> =&gt;</span> tag.id == tagId)</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="built_in">this</span>.seriesArray.length; i++) &#123;</span><br><span class="line">          <span class="keyword">let</span> series = <span class="built_in">this</span>.seriesArray[i]</span><br><span class="line">          <span class="keyword">if</span> (series.containerId == containerId) &#123;</span><br><span class="line">          <span class="comment">// 容器id相等则设置标签数据</span></span><br><span class="line">            series.id = tempTag[<span class="number">0</span>].id</span><br><span class="line">            series.name = tempTag[<span class="number">0</span>].fieldName</span><br><span class="line">            series.data = tempTag[<span class="number">0</span>].data</span><br><span class="line">            series.label = &#123;</span><br><span class="line">              show: <span class="literal">true</span>,</span><br><span class="line">              position: <span class="string">&#x27;top&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 将容器ID与标签ID添加到store，可以用vuex来管理标签id与容器id的关系，但是此处未用到</span></span><br><span class="line">        <span class="comment">// this.addContainerTagArray(&#123;</span></span><br><span class="line">        <span class="comment">//   containerId: containerId,</span></span><br><span class="line">        <span class="comment">//   tagId: tagId</span></span><br><span class="line">        <span class="comment">// &#125;)</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function"><span class="title">removeSeriesArray</span>(<span class="params">containerId</span>)</span> &#123;</span><br><span class="line">      <span class="comment">// 标签移出时</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="built_in">this</span>.seriesArray.length; i++) &#123;</span><br><span class="line">          <span class="keyword">let</span> temp = <span class="built_in">this</span>.seriesArray[i]</span><br><span class="line">          <span class="keyword">if</span> (temp.containerId == containerId) &#123;</span><br><span class="line">            <span class="comment">// 匹配则初始化</span></span><br><span class="line">            temp.id = <span class="string">&#x27;&#x27;</span></span><br><span class="line">            temp.data = []</span><br><span class="line">            temp.name = <span class="string">&#x27;&#x27;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 从store中移出</span></span><br><span class="line">        <span class="comment">// this.removeContainerTagArray(containerId)</span></span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>麻烦之处在于：</p>
<ol>
<li>Vue 的重渲染，如果动态添加系列数量，那么在系列数组发生变化后会导致整体的父组件重新渲染，导致拖拽来的标签消失（但实际数据还在），所以此处只能在一开始指定系列数量，并且如果要改变会提醒会丢失已有的配置；</li>
<li>dragula 没有提供时间毁掉所以只能手动添加监听事件，需要注意的是由于添加进系列数组和绑定监听事件均是在同一方法内，此时 vue 还未对 dom 进行重渲染，所以此时是无法获取到 dom 对象的，需要使用 <code>$nextTick</code> 在渲染完成后才能获取，当然别忘记 <code>this</code> 要换成 <code>_this</code></li>
</ol>
<h2 id="一些坑"><a href="#一些坑" class="headerlink" title="一些坑"></a>一些坑</h2><h3 id="popover-弹框组件在循环中的使用"><a href="#popover-弹框组件在循环中的使用" class="headerlink" title="popover 弹框组件在循环中的使用"></a>popover 弹框组件在循环中的使用</h3><p>elementUI 官方提供的 popover 的事例只是在单一按钮的基础上绑定弹框，但是更多的情况是在表格或者 v-for 中使用，那么此时就不能按照官方的写法来。完整代码如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table</span><br><span class="line">              :data=&quot;chartArray&quot;</span><br><span class="line">              :highlight-current-row=&quot;true&quot;</span><br><span class="line">              @row-click=&quot;setOption&quot;</span><br><span class="line">              style=&quot;width: 100%&quot;&gt;</span><br><span class="line">              &lt;el-table-column</span><br><span class="line">                label=&quot;图表名&quot;</span><br><span class="line">                width=&quot;110&quot;&gt;</span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                  &#123;&#123;scope.row.name&#125;&#125;</span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">&quot;操作&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">                  &lt;el-button</span><br><span class="line">                    size=&quot;mini&quot;</span><br><span class="line">                    type=&quot;primary&quot;</span><br><span class="line">                    @click=&quot;handleEdit(scope.$index, scope.row)&quot;&gt;编辑</span><br><span class="line">                  <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">el-popover</span> <span class="attr">placement</span>=<span class="string">&quot;top&quot;</span> <span class="attr">width</span>=<span class="string">&quot;160&quot;</span> <span class="attr">:ref</span>=<span class="string">&quot;&#x27;popover-&#x27;+scope.$index&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">p</span>&gt;</span>确定删除吗？<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;text-align: right; margin: 0&quot;</span>&gt;</span></span><br><span class="line">                      &lt;el-button</span><br><span class="line">                        size=&quot;mini&quot;</span><br><span class="line">                        type=&quot;text&quot;</span><br><span class="line">                        @click=&quot;scope._self.$refs[&#x27;popover-&#x27;+scope.$index].doClose()&quot;&gt;</span><br><span class="line">                        取消</span><br><span class="line">                      <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                      &lt;el-button</span><br><span class="line">                        type=&quot;primary&quot;</span><br><span class="line">                        size=&quot;mini&quot;</span><br><span class="line">                        @click=&quot;scope._self.$refs[&#x27;popover-&#x27;+scope.$index].doClose();;handleDelete(scope.row)&quot;&gt;</span><br><span class="line">                        确定</span><br><span class="line">                      <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;danger&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">slot</span>=<span class="string">&quot;reference&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">el-popover</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>关键之处在于：</p>
<ol>
<li><code>&lt;el-popover&gt;</code> 组件上的 ref 属性在循环的过程中需要绑定不同的值，可以用循环的 index 或者使用循环对象的 id；</li>
<li>在点击取消或者确定时使用 <code>scope._self.$refs[&#39;popover-&#39;+scope.$index].doClose()</code> 来关闭对应的 popover，后面再加上本身要执行的方法。</li>
</ol>
<h3 id="Echarts-的-option-合并"><a href="#Echarts-的-option-合并" class="headerlink" title="Echarts 的 option 合并"></a>Echarts 的 option 合并</h3><p>echarts 在默认情况下如果切换 option 会将之前的 option 与现在的 option 进行合并，因为一般情况下都是系列 <code>series</code> 发生变化，其他的如 xy 轴，图例之类的不会变，如果此时进行不同的 option 切换就会出现以下的结果：</p>
<p><img src="https://b3logfile.com/file/2020/07/echarts%E7%9A%84option%E5%90%88%E5%B9%B6-b30c98d3.gif" alt="echarts 的 option 合并.gif"></p>
<p>官方文档中是这么说的：<a target="_blank" rel="noopener" href="https://echarts.apache.org/zh/api.html#echartsInstance.setOption">option 合并</a><br>所以如果不想进行合并需要设置一下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">setOption</span>(<span class="params">row, column, event</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">this</span>.chart) &#123;</span><br><span class="line">          <span class="built_in">this</span>.chart = <span class="built_in">this</span>.$echarts.init(<span class="built_in">document</span>.getElementById(<span class="string">&#x27;chart-preview-container&#x27;</span>))</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">this</span>.chart.setOption(row.option, &#123;</span><br><span class="line">          <span class="comment">// option更新时不合并</span></span><br><span class="line">          notMerge: <span class="literal">true</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;,</span><br></pre></td></tr></table></figure>

<p>修改后就可以了：</p>
<p><img src="https://b3logfile.com/file/2020/07/echarts%E7%9A%84option%E5%90%88%E5%B9%B62-1d378030.gif" alt="echarts 的 option 合并 2.gif"></p>
<h3 id="滚动条隐藏"><a href="#滚动条隐藏" class="headerlink" title="滚动条隐藏"></a>滚动条隐藏</h3><p>自带的滚动条太丑了，所以我一般选择隐藏，记录一下对应的 CSS</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*右边卡片样式*/</span></span><br><span class="line"><span class="selector-class">.box-card-right</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">580px</span>;</span><br><span class="line">  <span class="attribute">overflow-y</span>: auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*设置隐藏滚动条*/</span></span><br><span class="line"><span class="selector-class">.box-card-right</span>::-webkit-scrollbar &#123;</span><br><span class="line">  display: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://39.101.199.168/articles/2020/06/24/1592966579861.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CrissMagic">
      <meta itemprop="description" content="CrissMagicBlog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一人行者">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/articles/2020/06/24/1592966579861.html" class="post-title-link" itemprop="url">CentOS7 下 Docker 相关操作</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-06-24 10:42:59" itemprop="dateCreated datePublished" datetime="2020-06-24T10:42:59+08:00">2020-06-24</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><img src="https://img.hacpai.com/bing/20191104.jpg?imageView2/1/w/960/h/540/interlace/1/q/100"></p>
<h1 id="CentOS7下Docker相关操作"><a href="#CentOS7下Docker相关操作" class="headerlink" title="CentOS7下Docker相关操作"></a>CentOS7下Docker相关操作</h1><h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><ul>
<li>Docker目前使用越来越多，并且渐渐熟悉后也体会到了一些方便快捷之处，此处记录一下目前接触到的相关操作。<h2 id="安装Docker"><a href="#安装Docker" class="headerlink" title="安装Docker"></a>安装Docker</h2></li>
</ul>
<ol>
<li>查看内核，版本必须高于3.10<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname -r</span><br></pre></td></tr></table></figure></li>
<li>移除旧的版本<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum remove docker*</span><br></pre></td></tr></table></figure></li>
<li>安装一些必要的系统工具<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install -y yum-utils device-mapper-persistent-data lvm2</span><br></pre></td></tr></table></figure></li>
<li>添加软件源信息（这里拉取阿里云的镜像）<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum-config-manager --add-repo http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;docker-ce&#x2F;linux&#x2F;centos&#x2F;docker-ce.repo</span><br></pre></td></tr></table></figure></li>
<li>更新 yum 缓存<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum makecache fast</span><br></pre></td></tr></table></figure></li>
<li>安装 Docker-ce（社区版）<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum -y install docker-ce</span><br></pre></td></tr></table></figure></li>
<li>启动 Docker 后台服务<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start docker</span><br></pre></td></tr></table></figure></li>
<li>测试运行 hello-world<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run hello-world</span><br></pre></td></tr></table></figure></li>
<li>添加开机启动<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl enable docker</span><br></pre></td></tr></table></figure>
<h2 id="简易安装mysql5-7"><a href="#简易安装mysql5-7" class="headerlink" title="简易安装mysql5.7"></a>简易安装mysql5.7</h2></li>
<li>拉取官方镜像<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull mysql:5.7</span><br></pre></td></tr></table></figure></li>
<li>创建映射目录<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 创建映射目录</span><br><span class="line">mkdir -p &#x2F;root&#x2F;mysql&#x2F;data &#x2F;root&#x2F;mysql&#x2F;logs &#x2F;root&#x2F;mysql&#x2F;conf</span><br><span class="line"># 创建配置文件</span><br><span class="line">cd &#x2F;root&#x2F;mysql&#x2F;conf</span><br><span class="line">touch my.cnf</span><br></pre></td></tr></table></figure></li>
<li>创建并运行容器（注意设置密码）<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 3306:3306 --name mysql -v &#x2F;root&#x2F;mysql&#x2F;conf:&#x2F;etc&#x2F;mysql&#x2F;conf.d -v &#x2F;root&#x2F;mysql&#x2F;logs:&#x2F;logs -v &#x2F;root&#x2F;mysql&#x2F;data:&#x2F;var&#x2F;lib&#x2F;mysql -e MYSQL_ROOT_PASSWORD&#x3D;root -d mysql:5.7</span><br></pre></td></tr></table></figure></li>
<li>远程连接</li>
</ol>
<h2 id="SpringBoot项目打包Docker镜像"><a href="#SpringBoot项目打包Docker镜像" class="headerlink" title="SpringBoot项目打包Docker镜像"></a>SpringBoot项目打包Docker镜像</h2><p>此处参考<a target="_blank" rel="noopener" href="https://github.com/xkcoding/spring-boot-demo">该开源项目</a></p>
<h3 id="手动打包"><a href="#手动打包" class="headerlink" title="手动打包"></a>手动打包</h3><blockquote>
<p>手动打包需要确保打包环境下有安装Docker</p>
</blockquote>
<ol>
<li>制作Dockerfile，例子如下：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># 基础镜像</span><br><span class="line">FROM openjdk:8-jdk-alpine</span><br><span class="line"></span><br><span class="line"># 作者信息</span><br><span class="line">MAINTAINER &quot;Yangkai.Shen 237497819@qq.com&quot;</span><br><span class="line"></span><br><span class="line"># 添加一个存储空间</span><br><span class="line">VOLUME &#x2F;tmp</span><br><span class="line"></span><br><span class="line"># 暴露8080端口</span><br><span class="line">EXPOSE 8080</span><br><span class="line"></span><br><span class="line"># 添加变量，如果使用dockerfile-maven-plugin，则会自动替换这里的变量内容</span><br><span class="line">ARG JAR_FILE&#x3D;target&#x2F;spring-boot-demo-docker.jar</span><br><span class="line"></span><br><span class="line"># 往容器中添加jar包</span><br><span class="line">ADD $&#123;JAR_FILE&#125; app.jar</span><br><span class="line"></span><br><span class="line"># 启动镜像自动运行程序</span><br><span class="line">ENTRYPOINT [&quot;java&quot;,&quot;-Djava.security.egd&#x3D;file:&#x2F;dev&#x2F;urandom&quot;,&quot;-jar&quot;,&quot;&#x2F;app.jar&quot;]</span><br></pre></td></tr></table></figure></li>
<li>打包<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t spring-boot-demo-docker .</span><br></pre></td></tr></table></figure></li>
<li>运行<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 9090:8080 spring-boot-demo-docker</span><br></pre></td></tr></table></figure>
<h3 id="使用maven插件打包"><a href="#使用maven插件打包" class="headerlink" title="使用maven插件打包"></a>使用maven插件打包</h3></li>
</ol>
<blockquote>
<p>使用maven插件打包须确保打包环境下有安装docker和maven</p>
</blockquote>
<ol>
<li>pom.xml中添加插件<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dockerfile-version</span>&gt;</span>1.4.9<span class="tag">&lt;/<span class="name">dockerfile-version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">plugins</span>&gt;</span>      </span><br><span class="line">    <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.spotify<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dockerfile-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;dockerfile-version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">repository</span>&gt;</span>$&#123;project.build.finalName&#125;<span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tag</span>&gt;</span>$&#123;project.version&#125;<span class="tag">&lt;/<span class="name">tag</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">buildArgs</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">JAR_FILE</span>&gt;</span>target/$&#123;project.build.finalName&#125;.jar<span class="tag">&lt;/<span class="name">JAR_FILE</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">buildArgs</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">id</span>&gt;</span>default<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">phase</span>&gt;</span>package<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">goal</span>&gt;</span>build<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li>执行mvn打包命令，因为插件中 execution 节点配置了 package，所以会在打包的时候自动执行 build 命令<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn clean package -Dmaven.test.skip&#x3D;true</span><br></pre></td></tr></table></figure></li>
<li>查看镜像<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure></li>
<li>运行<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 9090:8080 spring-boot-demo-docker:1.0.0-SNAPSHOT</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="本地单机搭建Portainer"><a href="#本地单机搭建Portainer" class="headerlink" title="本地单机搭建Portainer"></a>本地单机搭建Portainer</h2><h3 id="Portainer介绍"><a href="#Portainer介绍" class="headerlink" title="Portainer介绍"></a>Portainer介绍</h3><p>Portainer是Docker的图形化管理工具，提供状态显示面板、应用模板快速部署、容器镜像网络数据卷的基本操作（包括上传下载镜像，创建容器等操作）、事件日志显示、容器控制台操作、Swarm集群和服务等集中管理和操作、登录用户管理和控制等功能。功能十分全面，基本能满足中小型单位对容器管理的全部需求。</p>
<h3 id="单机版运行"><a href="#单机版运行" class="headerlink" title="单机版运行"></a>单机版运行</h3><ol>
<li>pull镜像<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull docker.io&#x2F;portainer&#x2F;portainer</span><br></pre></td></tr></table></figure></li>
<li>运行容器<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 9000:9000 \</span><br><span class="line">--restart&#x3D;always \</span><br><span class="line">-v &#x2F;var&#x2F;run&#x2F;docker.sock:&#x2F;var&#x2F;run&#x2F;docker.sock \</span><br><span class="line">--name prtainer-test \</span><br><span class="line">docker.io&#x2F;portainer&#x2F;portainer</span><br></pre></td></tr></table></figure></li>
<li>登录查看本地镜像与容器</li>
</ol>
<ul>
<li>访问<a target="_blank" rel="noopener" href="http://ip:9000/">http://IP:9000</a></li>
<li>首次进入需要给管理员admin初始化密码</li>
<li>单机版选择local即可</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://39.101.199.168/articles/2020/06/16/1592303153618.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CrissMagic">
      <meta itemprop="description" content="CrissMagicBlog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一人行者">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/articles/2020/06/16/1592303153618.html" class="post-title-link" itemprop="url">ElementUI表格表头高度设置问题</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-06-16 18:25:53" itemprop="dateCreated datePublished" datetime="2020-06-16T18:25:53+08:00">2020-06-16</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><img src="https://img.hacpai.com/bing/20180328.jpg?imageView2/1/w/960/h/540/interlace/1/q/100"></p>
<h1 id="ElementUI表格表头高度设置问题"><a href="#ElementUI表格表头高度设置问题" class="headerlink" title="ElementUI表格表头高度设置问题"></a>ElementUI表格表头高度设置问题</h1><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>最近在做一个前端项目的时候遇到了一件奇怪的事，如下图所示（此处借用一下别人的截图）：<br><img src="https://b3logfile.com/file/2020/06/image-a473b602.png" alt="image.png"></p>
<ul>
<li><p>从图中可以看到默认值是184.8px，但是按照官方文档说的<br>设置行高后：<br><code>:header-row-style=&quot;&#123;&#39;height&#39;: &#39;100px&#39;,&#39;color&#39;:&#39;red&#39;&#125;&quot;</code><br>无法生效，调试发现，设置的值大于 184.4 行高设置生效：<br><code>:header-row-style=&quot;&#123;&#39;height&#39;: &#39;200px&#39;,&#39;color&#39;:&#39;red&#39;&#125;”</code><br>而设置行高小于 184.4 时表头高度不变。<a target="_blank" rel="noopener" href="https://ask.csdn.net/questions/1082436">参考博客</a></p>
</li>
<li><p>我自己也遇到了类似的情况，按照网上很多博客说的进行了修改都还是无法更改行高，不过<a target="_blank" rel="noopener" href="https://segmentfault.com/q/1010000021031371">这篇博客</a>解决了我的问题。主要是由于<code>&lt;el-container&gt;</code> 布局容器中的 <code>&lt;el-main&gt;Main&lt;/el-main&gt; </code>的原因</p>
</li>
</ul>
<p>需要如下修改，当然具体数值需要根据自己的需要确定：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;原始：</span><br><span class="line">.el-main &#123;</span><br><span class="line">    background-color: #e9eef3;</span><br><span class="line">    color: #333;</span><br><span class="line">    &#x2F;* text-align: center; *&#x2F;</span><br><span class="line">    line-height: 461;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F;修改：</span><br><span class="line">.el-main &#123;</span><br><span class="line">    background-color: #e9eef3;</span><br><span class="line">    color: #333;</span><br><span class="line">    &#x2F;* text-align: center; *&#x2F;</span><br><span class="line">    line-height: 20px !important;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://39.101.199.168/articles/2020/06/12/1591949845775.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CrissMagic">
      <meta itemprop="description" content="CrissMagicBlog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一人行者">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/articles/2020/06/12/1591949845775.html" class="post-title-link" itemprop="url">iPad pro + 妙控键盘简单使用测评</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-06-12 16:17:25" itemprop="dateCreated datePublished" datetime="2020-06-12T16:17:25+08:00">2020-06-12</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><img src="https://img.hacpai.com/bing/20190114.jpg?imageView2/1/w/960/h/540/interlace/1/q/100"></p>
<h1 id="iPad-pro-妙控键盘简单使用测评"><a href="#iPad-pro-妙控键盘简单使用测评" class="headerlink" title="iPad pro + 妙控键盘简单使用测评"></a>iPad pro + 妙控键盘简单使用测评</h1><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>犹豫了许久还是入手了iPad pro 2020加上妙控键盘，正好遇上这次出差进行需求调研，考虑到天气的炎热以及短时间出差，所以此次没带笨重的开发机而是带了这两个，经过一个周的带妙控键盘使用和一个多月的iPad本体使用，这里做一个简单的使用测评。</p>
<p><img src="https://b3logfile.com/file/2020/06/image-d3c268ac.jpeg" alt="image.jpeg"></p>
<h2 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h2><ul>
<li><p>老实说用上了苹果的生态系统你会感觉有些时候是非常舒适的，比如文件同步，隔空投递，隔空复制粘贴之类的，并且由于操作系统的统一所以在一些文件的操作上是无缝衔接的，这个是对比windows最大的不同；</p>
</li>
<li><p>iPad pro 2020的性能自然不必说，并且由于是全面屏加双扬声器确实在看视频上有很大的优势，加上苹果一如既往优秀的屏幕素质，真的很能理解所谓的”买前生产力，买后爱奇艺”的说法，因为这个看视频确实很舒服；</p>
</li>
<li><p>妙控键盘出色的输入和触控板体验。老实说我也是第一次这么久使用苹果的触控板和键盘，苹果的触控板不愧为目前最优秀的，顺滑感和较为人性的手势之类的在自身平台软件的操作上十分舒服。并且今年也修改了之前蝶式键盘的设计，我曾经去北京出差时专门去体验过mbp的蝶式键盘，可以说就是在一块钢板上进行输入，虽然这样使得机身变得更薄但是我认为牺牲输入体验还是不和我口味，而今年修改回来的剪刀式键盘输入体验就好了很多，虽说还是不能和tp系列相比但是已经有了较为舒服的键程，输入起来也不累，本篇文章就是在妙控键盘上输入的。</p>
</li>
<li><p>自带文档软件体验优秀。这次出差也是我第一次使用苹果自带的numbers，pages软件。由于是自家的软件所以在配合妙控键盘上比较顺畅，相比而言wps对于妙控键盘的适配还有些不足。numbers和pages都支持导出为excel、word、pdf文件，对于一些格式简单的文档可以说非常舒服，但是对于格式复杂的文档会是什么情况不得而知，目前还没有遇到。</p>
</li>
<li><p>一些优秀软件的配合。提起iPad就不得不提经常在b站知乎上看到推荐的notability和goodnotes，两者配合二代笔的体验的确十分优秀，但是目前自己还未完全熟练使用，所以目前我更偏向于用margin note来阅读pdf，因为我更喜欢思维导图的方式来梳理所学的知识，这几天抽空在这上面读完了阿里的企业架构转型之道一书，一方面不得不承认阿里积累的技术真的很强，另一方面也感叹自己还有太多太多要学习的东西。<br><img src="https://b3logfile.com/file/2020/06/image-dc393897.png" alt="image.png"></p>
</li>
</ul>
<ul>
<li>Procreate延续板绘兴趣。在iPad pro上用二代笔进行Procreate的板绘体验也是十分出色，之前自己使用的是Wacom的入门级板子，虽说自己还记得一些素描的手感但是在板子上画当初也适应了蛮长时间。而有了iPad则可以看着画了，加上二代笔的优秀触控，这个体验的确很舒服（用了很多舒服这个词，但是不得不说好的产品就应该是让人用着是舒服的），作为兴趣就慢慢来吧。<br><img src="https://b3logfile.com/file/2020/06/image-a534aa92.png" alt="image.png"></li>
</ul>
<h2 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h2><ul>
<li><p>个人觉得最大的缺点还是在于重量。 iPad pro本身其实不重，但是加上妙控键盘已经能够和一些轻薄本相比了，虽然出差背在背上感觉很轻，但是当拿在手里的时候还是感觉很有份量的。但考虑到为了保证整体的平衡这个我还是能够接受，毕竟比起游戏本还是轻了太多；</p>
</li>
<li><p>轻度办公。苹果广告语说下一台电脑何必是电脑我感觉还是有点夸大，因为平板能做的毕竟还是不如笔电的。举个例子，且不说正版软件收费的问题，我如果要远程连接数据库，或者说要进行一些代码的编写，目前iPadOS上的软件还是不如笔电上的来的方便，并且也由于操作系统的不同，如何在平板上进行开发我也是一头雾水，当然我觉得平板还是只适合轻度办公与产品演示。</p>
</li>
<li><p>Safari对flash的不支持。目前仍然有一些网站使用flash进行视频播放，但是iPad的Safari无法安装flash插件导致无法播放视频，这个的确有时很影响体验，因为同样的网站手机上使用Safari是可以播放的，而且目前很多网站也没有对平板的比例进行适配，使得网页比例失调。</p>
</li>
<li><p>大部分时候妙控键盘和二代笔的相斥。因为使用场景的原因，使得你很难同时使用妙控键盘和二代笔，当然从设计上来说你有了键盘自然也大概率不需要再手写了，但是对于我这种笔迹不好看的人来说两者如果能配合起来就好了。</p>
</li>
</ul>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>以上是目前为止我自己的使用体验，总体来说肯定是优势大于缺点的，但是想着把iPad当成你下一台电脑使用还是有些力不从心，除非你的工作需求真的只是轻度办公。如果是学生党用作学习我感觉二代笔+k380还是最佳的选择。对于我自己而言，休闲时使用iPad来学习娱乐肯定是比笔电要舒服的，因为重量，也因为显示屏，并且在平板上阅读pdf，写写画画等真的是十分的惬意，就像学生时代喜欢在纸上写写画画一样，找到自己最舒服的使用方式才是最好的。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://39.101.199.168/articles/2020/06/05/1591324820534.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CrissMagic">
      <meta itemprop="description" content="CrissMagicBlog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一人行者">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/articles/2020/06/05/1591324820534.html" class="post-title-link" itemprop="url">SQL相关学习与优化（持续更新）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-06-05 10:40:20" itemprop="dateCreated datePublished" datetime="2020-06-05T10:40:20+08:00">2020-06-05</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><img src="https://img.hacpai.com/bing/20191122.jpg?imageView2/1/w/960/h/540/interlace/1/q/100"></p>
<h2 id="1、or-与-UNION"><a href="#1、or-与-UNION" class="headerlink" title="1、or 与 UNION"></a>1、<code>or</code> 与 <code>UNION</code></h2><p><a target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/big-countries/">习题来源：595.大的国家</a><br>这道题较为简单，所以此处记录下<code>OR</code> 与 <code>UNION</code>的使用</p>
<ul>
<li>使用<code>or</code>与<code>UNION</code>在结果上差别不大</li>
<li><code>UNION</code>自带去重，若不想去重则使用<code>UNION ALL</code></li>
<li><code>where</code> 子句中对非索引列使用 <code>or</code> 会引起全表扫描，故在数据量较大的时候查找效率较低，通常建议使用 <code>UNION</code>代替 <code>or</code></li>
<li>同理对于索引列来最好使用 <code>union all</code>，因复杂的查询（包含运算等）将使 <code>or</code>、<code>in</code> 放弃索引而全表扫描，除非你能确定 <code>or</code>、<code>in</code> 会使用索引</li>
<li>对于只有非索引字段,就老老实实用 <code>or</code> 或者 <code>in</code>，因为非索引字段本来要全表扫描而 <code>union all</code> 只会成倍增加表扫描的次数</li>
<li>以上主要针对单表查询，对于多表联查来说，考虑的地方就多了，比如连接方式，查询表数据量分布、索引等，再结合单表的策略选择合适的关键字</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://39.101.199.168/articles/2020/06/04/1591237014985.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CrissMagic">
      <meta itemprop="description" content="CrissMagicBlog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一人行者">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/articles/2020/06/04/1591237014985.html" class="post-title-link" itemprop="url">程序员专用知识类网站推荐（持续更新）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-06-04 10:16:55" itemprop="dateCreated datePublished" datetime="2020-06-04T10:16:55+08:00">2020-06-04</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><img src="https://img.hacpai.com/bing/20181009.jpg?imageView2/1/w/960/h/540/interlace/1/q/100"></p>
<h1 id="程序员专用知识类网站推荐（持续更新）"><a href="#程序员专用知识类网站推荐（持续更新）" class="headerlink" title="程序员专用知识类网站推荐（持续更新）"></a>程序员专用知识类网站推荐（持续更新）</h1><h2 id="记录一些自己在平时学习工作中遇到的看到的有用的知识类网站，可以很好地扩充自身技能知识水平。"><a href="#记录一些自己在平时学习工作中遇到的看到的有用的知识类网站，可以很好地扩充自身技能知识水平。" class="headerlink" title="记录一些自己在平时学习工作中遇到的看到的有用的知识类网站，可以很好地扩充自身技能知识水平。"></a>记录一些自己在平时学习工作中遇到的看到的有用的知识类网站，可以很好地扩充自身技能知识水平。</h2><ul>
<li><p><a target="_blank" rel="noopener" href="https://doocs.gitee.io/advanced-java/#/">互联网Java工程师进阶知识完全扫盲</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://quanke.gitbooks.io/design-pattern-java/content/">设计模式Java版</a></p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://39.101.199.168/articles/2020/05/26/1590487196412.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CrissMagic">
      <meta itemprop="description" content="CrissMagicBlog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一人行者">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/articles/2020/05/26/1590487196412.html" class="post-title-link" itemprop="url">Centos7部署Sonarqube6.7.4</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-05-26 17:59:56" itemprop="dateCreated datePublished" datetime="2020-05-26T17:59:56+08:00">2020-05-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-06-03 11:10:02" itemprop="dateModified" datetime="2020-06-03T11:10:02+08:00">2020-06-03</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><img src="https://img.hacpai.com/bing/20200512.jpg?imageView2/1/w/960/h/540/interlace/1/q/100"></p>
<h1 id="CentOS7-部署-Sonarqube6-7-4"><a href="#CentOS7-部署-Sonarqube6-7-4" class="headerlink" title="CentOS7 部署 Sonarqube6.7.4"></a>CentOS7 部署 Sonarqube6.7.4</h1><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在学习 Jenkins 自动化集成的过程中学习了 Sonarqube 这个代码审查工具的用法，觉得十分不错，此处记录一下单独部署使用的过程，安装版本为 6.7.4，流程参考<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/349b4a0ac5b8">此博客</a>，下载链接如下：<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/19XnSM_i7cgjQCjIwj5WdAw">s8nx</a></p>
<h2 id="具体安装步骤"><a href="#具体安装步骤" class="headerlink" title="具体安装步骤"></a>具体安装步骤</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"># 1 准备工作</span><br><span class="line"># 1.1 服务器上传zip包</span><br><span class="line"></span><br><span class="line"># 1.2 安装unzip解压工具</span><br><span class="line">yum install -y unzip</span><br><span class="line"></span><br><span class="line"># 1.3 解压</span><br><span class="line">unzip sonarqube-6.7.4.zip</span><br><span class="line"></span><br><span class="line"># 1.4 新建文件夹并转移文件</span><br><span class="line">mkdir &#x2F;opt&#x2F;sonar</span><br><span class="line">mv sonarqube-6.7.4&#x2F;* &#x2F;opt&#x2F;sonar</span><br><span class="line"></span><br><span class="line"># 1.5 创建新用户。由于ES不能使用系统自带的root账户登录，所以需要建立新的用户</span><br><span class="line">useradd sonar</span><br><span class="line"></span><br><span class="line"># 1.6 赋予权限</span><br><span class="line">chown -R sonar. &#x2F;opt&#x2F;sonar</span><br><span class="line"></span><br><span class="line"># 2 Sonarqube配置修改</span><br><span class="line"># 2.1 sonar.properties修改</span><br><span class="line">vim &#x2F;opt&#x2F;sonarqube-6.7.4&#x2F;conf&#x2F;sonar.properties</span><br><span class="line"></span><br><span class="line"># 具体配置如下：</span><br><span class="line">sonar.host.url&#x3D;http:&#x2F;&#x2F;localhost:9090</span><br><span class="line">sonar.jdbc.username&#x3D;数据库用户名</span><br><span class="line">sonar.jdbc.password&#x3D;数据库密码</span><br><span class="line">sonar.jdbc.url&#x3D;jdbc:mysql:&#x2F;&#x2F;数据库IP:3306&#x2F;sonar?useUnicode&#x3D;true&amp;characterEncoding&#x3D;utf8&amp;rewriteBatchedStatements&#x3D;true&amp;useConfigs&#x3D;maxPerformance</span><br><span class="line">sonar.web.host&#x3D;0.0.0.0</span><br><span class="line">## 配置web访问的路径 这里必须要有 &#x2F; 前缀</span><br><span class="line">sonar.web.context&#x3D;&#x2F;sonar</span><br><span class="line">## web容器的端口号</span><br><span class="line">sonar.web.port&#x3D;9090</span><br><span class="line"></span><br><span class="line"># 2.2 需要注意的是Sonarqube默认9000端口，ES默认9001端口，这两个端口在服务器上均不能被占用，所以可根据实际情况进行修改，ES端口在下方配置中：</span><br><span class="line"></span><br><span class="line"># Elasticsearch port. Default is 9001. Use 0 to get a free port.</span><br><span class="line"># As a security precaution, should be blocked by a firewall and not exposed to the Internet.</span><br><span class="line"># sonar.search.port&#x3D;9001</span><br><span class="line"></span><br><span class="line"># 此处需要放开配置进行修改</span><br><span class="line"></span><br><span class="line"># 3 运行启动</span><br><span class="line"></span><br><span class="line"># 3.1 切换目录</span><br><span class="line">cd &#x2F;opt&#x2F;sonarqube-6.7.4</span><br><span class="line"></span><br><span class="line"># 3.2 相关操作</span><br><span class="line"></span><br><span class="line"># 启动</span><br><span class="line">su sonar .&#x2F;bin&#x2F;linux-x86-64&#x2F;sonar.sh start </span><br><span class="line"># 查看状态</span><br><span class="line">su sonar .&#x2F;bin&#x2F;linux-x86-64&#x2F;sonar.sh status</span><br><span class="line"># 停止 </span><br><span class="line">su sonar .&#x2F;bin&#x2F;linux-x86-64&#x2F;sonar.sh stop </span><br><span class="line"># 重新启动</span><br><span class="line">su sonar .&#x2F;bin&#x2F;linux-x86-64&#x2F;sonar.sh start</span><br><span class="line"># 查看日志</span><br><span class="line">tail -f logs&#x2F;sonar.logs </span><br><span class="line"></span><br><span class="line"># 3.3 若启动报错可查看logs目录下的文件信息进行排查</span><br><span class="line"></span><br><span class="line"># 4 访问Sonarqube，默认账户：admin&#x2F;admin</span><br><span class="line">http:&#x2F;&#x2F;xxx.xxx.xxx.xxx:9090</span><br></pre></td></tr></table></figure>

<h2 id="中文汉化"><a href="#中文汉化" class="headerlink" title="中文汉化"></a>中文汉化</h2><ul>
<li>汉化版本参考如下 <a target="_blank" rel="noopener" href="https://github.com/SonarQubeCommunity/sonar-l10n-zh/tree/sonar-l10n-zh-plugin-8.3">github</a></li>
<li>需要选择下载对应版本的汉化 jar 包，例如此处安装 6.7.4 对应 <a target="_blank" rel="noopener" href="https://github.com/SonarQubeCommunity/sonar-l10n-zh/releases/tag/sonar-l10n-zh-plugin-1.19">1.19 版本</a><br><img src="https://b3logfile.com/file/2020/05/image-b47aa498.png" alt="image.png"></li>
<li>下载后放入 <code>/opt/sonar/extensions/plugins</code> 目录下再重新启动即可</li>
</ul>
<h2 id="使用后补充"><a href="#使用后补充" class="headerlink" title="使用后补充"></a>使用后补充</h2><p>最近在进行分析的时候总会出现错误，IDEA终端报错：<br><img src="https://b3logfile.com/file/2020/06/image-8312347a.png" alt="image.png"></p>
<p>查看日志文件发现如下信息：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Caused by: com.mysql.jdbc.PacketTooBigException: Packet for query is too large (6146004 &gt; 4194304). You can change this value on the server by setting the max_allowed_packet&#39; variable.</span><br><span class="line">	at com.mysql.jdbc.MysqlIO.send(MysqlIO.java:3678)</span><br><span class="line">	at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2509)</span><br><span class="line">	at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2680)</span><br><span class="line">	at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2490)</span><br><span class="line">	at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1858)</span><br><span class="line">	at com.mysql.jdbc.PreparedStatement.executeUpdateInternal(PreparedStatement.java:2079)</span><br><span class="line">	at com.mysql.jdbc.PreparedStatement.executeUpdateInternal(PreparedStatement.java:2013)</span><br><span class="line">	at com.mysql.jdbc.PreparedStatement.executeLargeUpdate(PreparedStatement.java:5104)</span><br><span class="line">	at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1998)</span><br><span class="line">	at org.apache.commons.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:105)</span><br><span class="line">	at org.apache.commons.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:105)</span><br><span class="line">	at org.sonar.db.ce.CeTaskInputDao.insert(CeTaskInputDao.java:53)</span><br><span class="line">	... 45 common frames omitted</span><br></pre></td></tr></table></figure>
<p>经过搜索后发现这个是mysql的设置max_allowed_packet太小的原因，可以通过</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show VARIABLES like &#39;%max_allowed_packet%&#39;;</span><br></pre></td></tr></table></figure>
<p>查看具体值，此处需要将这个值修改大。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 修改mysql配置文件</span><br><span class="line">vim &#x2F;etc&#x2F;my.cnf</span><br><span class="line"></span><br><span class="line"># 添加max_allowed_packet配置，1073741824为1024*1024*1024，即1G，此处可以修改为其他合适的值</span><br><span class="line">max_allowed_packet&#x3D;1073741824</span><br><span class="line"></span><br><span class="line"># wq保存后，重启mysql</span><br></pre></td></tr></table></figure>
<p>之后可以再次通过</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show VARIABLES like &#39;%max_allowed_packet%&#39;;</span><br></pre></td></tr></table></figure>
<p>查看是否修改成功</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://39.101.199.168/articles/2020/05/12/1589258874768.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CrissMagic">
      <meta itemprop="description" content="CrissMagicBlog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一人行者">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/articles/2020/05/12/1589258874768.html" class="post-title-link" itemprop="url">使用阿里云服务器跳转访问公司内网</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-05-12 12:47:54" itemprop="dateCreated datePublished" datetime="2020-05-12T12:47:54+08:00">2020-05-12</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><img src="https://img.hacpai.com/bing/20180424.jpg?imageView2/1/w/960/h/540/interlace/1/q/100"></p>
<h1 id="使用阿里云服务器跳转访问公司内网"><a href="#使用阿里云服务器跳转访问公司内网" class="headerlink" title="使用阿里云服务器跳转访问公司内网"></a>使用阿里云服务器跳转访问公司内网</h1><h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p>有段时间没更新了，这段时间忙于手里当前项目的移动端开发，加上还要对PC端的代码进行CodeReview与功能测试完善，后面会慢慢补上。由于移动端也是第一次接触开发，在使用uni-app时也遇到了很多问题，后面项目差不多时我也会一一整理一下。</p>
<h2 id="博客目的"><a href="#博客目的" class="headerlink" title="博客目的"></a>博客目的</h2><p>公司内网部署CDH后，数栖平台需要访问CDH集群，所以需要内网穿透或者公网IP，此处使用内网穿透的方式，用自己的阿里云服务器做跳板测试。具体流程参考<a target="_blank" rel="noopener" href="https://blog.csdn.net/a568713197/article/details/87897342">该博客</a></p>
<h2 id="具体流程"><a href="#具体流程" class="headerlink" title="具体流程"></a>具体流程</h2><p>参考博客使用的是0.13.0版本，此处使用最新版0.33.0</p>
<h3 id="1、下载frp包"><a href="#1、下载frp包" class="headerlink" title="1、下载frp包"></a>1、下载frp包</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https:&#x2F;&#x2F;github.com&#x2F;fatedier&#x2F;frp&#x2F;releases&#x2F;download&#x2F;v0.33.0&#x2F;frp_0.33.0_linux_amd64.tar.gz</span><br></pre></td></tr></table></figure>
<h3 id="2、新建frp目录"><a href="#2、新建frp目录" class="headerlink" title="2、新建frp目录"></a>2、新建frp目录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p &#x2F;usr&#x2F;local&#x2F;frp</span><br></pre></td></tr></table></figure>
<h3 id="3、解压到该目录"><a href="#3、解压到该目录" class="headerlink" title="3、解压到该目录"></a>3、解压到该目录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf  frp_0.33.0_linux_amd64.tar.gz -C &#x2F;usr&#x2F;local&#x2F;frp</span><br></pre></td></tr></table></figure>
<h3 id="4、进入解压目录-frp-0-33-0-linux-amd64，这里主要关注-4-个文件，分别是-frpc、frpc-ini-和-frps、frps-ini，前者两个文件是客户端所关注文件，后者两个文件是服务端所关注两个文件。"><a href="#4、进入解压目录-frp-0-33-0-linux-amd64，这里主要关注-4-个文件，分别是-frpc、frpc-ini-和-frps、frps-ini，前者两个文件是客户端所关注文件，后者两个文件是服务端所关注两个文件。" class="headerlink" title="4、进入解压目录 frp_0.33.0_linux_amd64，这里主要关注 4 个文件，分别是 frpc、frpc.ini 和 frps、frps.ini，前者两个文件是客户端所关注文件，后者两个文件是服务端所关注两个文件。"></a>4、进入解压目录 frp_0.33.0_linux_amd64，这里主要关注 4 个文件，分别是 frpc、frpc.ini 和 frps、frps.ini，前者两个文件是客户端所关注文件，后者两个文件是服务端所关注两个文件。</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd &#x2F;usr&#x2F;local&#x2F;frp&#x2F;frp_0.33.0_linux_amd64</span><br></pre></td></tr></table></figure>
<p><img src="https://img.hacpai.com/file/2020/05/image-a8b4a8ab.png" alt="image.png"></p>
<h3 id="5、配置服务端（公网服务器），首先删掉-frpc、frpc-ini-两个文件，然后再进行配置"><a href="#5、配置服务端（公网服务器），首先删掉-frpc、frpc-ini-两个文件，然后再进行配置" class="headerlink" title="5、配置服务端（公网服务器），首先删掉 frpc、frpc.ini 两个文件，然后再进行配置"></a>5、配置服务端（公网服务器），首先删掉 frpc、frpc.ini 两个文件，然后再进行配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim .&#x2F;frps.ini</span><br><span class="line"> [common]</span><br><span class="line">bind_port &#x3D; 7000           #与客户端绑定的进行通信的端口</span><br></pre></td></tr></table></figure>
<h3 id="6、配置客户端（内网服务器），客户端同样需要下载包再解压的操作，首先删掉-frps、frps-ini-两个文件，然后再进行配置。"><a href="#6、配置客户端（内网服务器），客户端同样需要下载包再解压的操作，首先删掉-frps、frps-ini-两个文件，然后再进行配置。" class="headerlink" title="6、配置客户端（内网服务器），客户端同样需要下载包再解压的操作，首先删掉 frps、frps.ini 两个文件，然后再进行配置。"></a>6、配置客户端（内网服务器），客户端同样需要下载包再解压的操作，首先删掉 frps、frps.ini 两个文件，然后再进行配置。</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">vim .&#x2F;frpc.ini</span><br><span class="line"></span><br><span class="line">[common]</span><br><span class="line">server_addr &#x3D; x.x.x.x 		#公网服务器ip</span><br><span class="line">server_port &#x3D; 7000            #与服务端bind_port一致</span><br><span class="line"> </span><br><span class="line"># 公网通过ssh访问内部服务器</span><br><span class="line">[ssh]</span><br><span class="line">type &#x3D; tcp              #连接协议</span><br><span class="line">local_ip &#x3D; 127.0.0.1   	#内网服务器ip（127.0.0.1或者内网IP）</span><br><span class="line">local_port &#x3D; 22         #ssh默认端口号</span><br><span class="line">remote_port &#x3D; 6000      #自定义的访问内部ssh端口号</span><br></pre></td></tr></table></figure>
<h3 id="7、登录阿里云服务器配置安全组"><a href="#7、登录阿里云服务器配置安全组" class="headerlink" title="7、登录阿里云服务器配置安全组"></a>7、登录阿里云服务器配置安全组</h3><p><img src="https://img.hacpai.com/file/2020/05/image-4e07b915.png" alt="image.png"></p>
<blockquote>
<p>注意图中红框部分与配置文件对应</p>
</blockquote>
<h3 id="8、启动frp"><a href="#8、启动frp" class="headerlink" title="8、启动frp"></a>8、启动frp</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 客户端执行</span><br><span class="line"># 前台启动</span><br><span class="line">.&#x2F;frpc -c .&#x2F;frpc.ini</span><br><span class="line"># 后台启动</span><br><span class="line">nohup .&#x2F;frpc -c .&#x2F;frpc.ini &amp;</span><br><span class="line"></span><br><span class="line"># 服务器执行</span><br><span class="line"># 前台启动</span><br><span class="line">.&#x2F;frps -c .&#x2F;frps.ini</span><br><span class="line"># 后台启动</span><br><span class="line">nohup .&#x2F;frps -c .&#x2F;frps.ini &amp;</span><br></pre></td></tr></table></figure>
<h3 id="9、查看状态"><a href="#9、查看状态" class="headerlink" title="9、查看状态"></a>9、查看状态</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">cat nohup.out</span><br><span class="line"></span><br><span class="line"># 客户端</span><br><span class="line">[I] [service.go:282] [9e7aff8044210603] login to server success, get run id [9e7aff8044210603], server udp port [0]</span><br><span class="line">[I] [proxy_manager.go:144] [9e7aff8044210603] proxy added: [ssh]</span><br><span class="line">[I] [control.go:179] [9e7aff8044210603] [ssh] start proxy success</span><br><span class="line"></span><br><span class="line"># 服务端</span><br><span class="line">[I] [service.go:432] [9e7aff8044210603] client login info: ip [x.x.x.x:43460] version [0.33.0] hostname [] os [linux] arch [amd64]</span><br><span class="line">[I] [tcp.go:63] [9e7aff8044210603] [ssh] tcp proxy listen port [6000]</span><br><span class="line">[I] [control.go:445] [9e7aff8044210603] new proxy [ssh] success</span><br></pre></td></tr></table></figure>
<h3 id="10、通过阿里云服务器登录内网"><a href="#10、通过阿里云服务器登录内网" class="headerlink" title="10、通过阿里云服务器登录内网"></a>10、通过阿里云服务器登录内网</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ssh -oPort&#x3D;6000 root@x.x.x.x</span><br><span class="line"># root为内网用户名</span><br><span class="line"># x.x.x.x为外网服务器地址</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">CrissMagic</p>
  <div class="site-description" itemprop="description">CrissMagicBlog</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">25</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">28</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">CrissMagic</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
